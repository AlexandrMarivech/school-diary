{% extends "base.html" %}
{% block content %}

<div class="row">
  <div class="col-lg-12">
    <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –¥–ª—è –≤–≤–æ–¥–∞ –æ—Ü–µ–Ω–æ–∫ -->
    <div class="card shadow-sm border-0 rounded-3 mb-4">
      <div class="card-body">
        <h4 class="card-title mb-3">üë®‚Äçüè´ –£—á–∏—Ç–µ–ª—å ‚Äî –≤–≤–æ–¥ –æ—Ü–µ–Ω–æ–∫</h4>

        <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ (–µ—Å–ª–∏ –æ—Ü–µ–Ω–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã) -->
        {% if message %}
          <div class="alert alert-success">{{ message }}</div>
        {% endif %}

        <!-- –§–æ—Ä–º–∞ –¥–ª—è –≤–≤–æ–¥–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –æ—Ü–µ–Ω–æ–∫ -->
        <form method="post">
          <!-- –í—ã–±–æ—Ä –ø—Ä–µ–¥–º–µ—Ç–∞, –≥–æ–¥–∞, —á–µ—Ç–≤–µ—Ä—Ç–∏ –∏ –Ω–µ–¥–µ–ª–∏ -->
          <div class="row g-3 mb-3">
            <div class="col-md-3">
              <label class="form-label fw-semibold">–ü—Ä–µ–¥–º–µ—Ç</label>
              <select name="subject" class="form-select form-select-sm">
                {% for s in subjects %}
                  <option value="{{ s.id }}">{{ s.name }}</option>
                {% endfor %}
              </select>
            </div>
            <div class="col-md-3">
              <label class="form-label fw-semibold">–ì–æ–¥</label>
              <input name="year" value="{{ current_year() }}" class="form-control form-control-sm">
            </div>
            <div class="col-md-3">
              <label class="form-label fw-semibold">–ß–µ—Ç–≤–µ—Ä—Ç—å</label>
              <input name="quarter" value="1" class="form-control form-control-sm">
            </div>
            <div class="col-md-3">
              <label class="form-label fw-semibold">–ù–µ–¥–µ–ª—è</label>
              <input name="week" value="1" class="form-control form-control-sm">
              <div class="form-text">–ù–∞–ø—Ä–∏–º–µ—Ä: 1..10</div>
            </div>
          </div>

          <!-- –¢–∞–±–ª–∏—Ü–∞ —Å–æ —Å–ø–∏—Å–∫–æ–º –≤—Å–µ—Ö —É—á–µ–Ω–∏–∫–æ–≤ -->
          <h5 class="mt-4">üìã –°–ø–∏—Å–æ–∫ —É—á–µ–Ω–∏–∫–æ–≤</h5>
          <div class="table-responsive">
            <table class="table table-hover align-middle">
              <thead class="table-light">
                <tr>
                  <th>–£—á–µ–Ω–∏–∫</th>
                  <th style="width:200px;">–û—Ü–µ–Ω–∫–∞</th>
                </tr>
              </thead>
              <tbody>
              {% for st in students %}
                <tr>
                  <!-- –§–ò–û —É—á–µ–Ω–∏–∫–∞ -->
                  <td>{{ st.fullname or st.username }}</td>
                  <!-- –ü–æ–ª–µ –¥–ª—è –≤–≤–æ–¥–∞ –æ—Ü–µ–Ω–∫–∏ -->
                  <td>
                    <input name="student_{{ st.id }}" class="form-control form-control-sm" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä 4">
                  </td>
                </tr>
              {% endfor %}
              </tbody>
            </table>
          </div>

          <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –æ—Ü–µ–Ω–æ–∫ -->
          <button class="btn btn-primary mt-3">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ü–µ–Ω–∫–∏</button>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- –û—Ç–¥–µ–ª—å–Ω—ã–π –±–ª–æ–∫ –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –æ—Ü–µ–Ω–æ–∫ -->
<div class="row">
  <div class="col-lg-12">
    <div class="card shadow-sm border-0 rounded-3">
      <div class="card-body">
        <h5 class="card-title mb-3">üì§ –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–∞</h5>

        <!-- –§–æ—Ä–º–∞ –¥–ª—è –≤—ã–≥—Ä—É–∑–∫–∏ Excel-–æ—Ç—á—ë—Ç–∞ -->
        <form method="get" action="{{ url_for('export_teacher_xlsx') }}">
          <div class="row g-3 mb-3">
            <div class="col-md-3">
              <label class="form-label fw-semibold">–ü—Ä–µ–¥–º–µ—Ç</label>
              <select name="subject" class="form-select form-select-sm">
                <option value="0">–í—Å–µ</option>
                {% for s in subjects %}
                  <option value="{{ s.id }}">{{ s.name }}</option>
                {% endfor %}
              </select>
            </div>
            <div class="col-md-3">
              <label class="form-label fw-semibold">–ì–æ–¥</label>
              <input name="year" value="{{ current_year() }}" class="form-control form-control-sm">
            </div>
            <div class="col-md-3">
              <label class="form-label fw-semibold">–ß–µ—Ç–≤–µ—Ä—Ç—å</label>
              <input name="quarter" value="0" class="form-control form-control-sm">
              <div class="form-text">0 = –≤—Å–µ —á–µ—Ç–≤–µ—Ä—Ç–∏</div>
            </div>
            <div class="col-md-3">
              <label class="form-label fw-semibold">–ù–µ–¥–µ–ª—è</label>
              <input name="week" value="0" class="form-control form-control-sm">
              <div class="form-text">0 = –≤—Å–µ –Ω–µ–¥–µ–ª–∏</div>
            </div>
          </div>

          <!-- –ö–Ω–æ–ø–∫–∏ –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –∏ –æ—Ç—á—ë—Ç–∞ –ø–æ –∫–ª–∞—Å—Å—É -->
          <button class="btn btn-outline-secondary">‚¨áÔ∏è –°–∫–∞—á–∞—Ç—å –æ—Ç—á—ë—Ç –≤ Excel</button>
          <a href="{{ url_for('teacher_report') }}" class="btn btn-outline-primary ms-2">üìä –û—Ç—á—ë—Ç –ø–æ –∫–ª–∞—Å—Å—É</a>
        </form>
      </div>
    </div>
  </div>
</div>

{% endblock %}
