{% extends "base.html" %}
{% block content %}
<div class="container">
    <h1>Страница учителя</h1>
    <p>Добро пожаловать, {{ session.fullname or session.username }}!</p>
    <p>{{ message }}</p>
    <a href="{{ url_for('logout') }}" class="btn btn-danger">Выйти</a>
    <hr>
    <h2>Выставить оценки</h2>
    <form method="POST">
        <div class="form-group">
            <label>Предмет</label>
            <select name="subject_id" class="form-control">
                <option value="">Выберите предмет</option>
                {% for s in subjects %}
                <option value="{{ s.id }}">{{ s.name }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group">
            <label>Год</label>
            <input type="number" name="year" value="{{ current_year }}" class="form-control">
        </div>
        <div class="form-group">
            <label>Четверть</label>
            <select name="quarter" class="form-control">
                <option value="0">Все</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
            </select>
        </div>
        <div class="form-group">
            <label>Неделя</label>
            <input type="number" name="week" value="1" class="form-control">
        </div>
        <hr>
        <h3>Ученики</h3>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>ФИО</th>
                    <th>Оценка</th>
                </tr>
            </thead>
            <tbody>
                {% for st in students %}
                <tr>
                    <td>{{ st.fullname or st.username }}</td>
                    <td><input type="number" min="2" max="5" name="grade_{{ st.id }}" class="form-control"></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <button type="submit" class="btn btn-primary">Сохранить</button>
    </form>
    <hr>
    <a href="{{ url_for('teacher_report') }}" class="btn btn-info">Посмотреть отчёты</a>
</div>
{% endblock %}