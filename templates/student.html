{% extends "base.html" %}
{% block content %}
<div class="row">
  <div class="col-md-3">
    <h5>–§–∏–ª—å—Ç—Ä</h5>
    <form class="mb-3" method="get">
      <div class="mb-2"><label>–ì–æ–¥</label><input name="year" value="{{ year }}" class="form-control"></div>
      <div class="mb-2"><label>–ß–µ—Ç–≤–µ—Ä—Ç—å (0=–í—Å–µ)</label><input name="quarter" value="{{ quarter }}" class="form-control"></div>
      <div class="mb-2">
        <label>–ü—Ä–µ–¥–º–µ—Ç</label>
        <select name="subject" class="form-select">
          <option value="0">–í—Å–µ</option>
          {% for s in subjects %}<option value="{{ s.id }}" {% if subject_id==s.id %}selected{% endif %}>{{ s.name }}</option>{% endfor %}
        </select>
      </div>
      <button class="btn btn-sm btn-primary">–ü–æ–∫–∞–∑–∞—Ç—å</button>
    </form>
  </div>
  <div class="col-md-9">
    <h4>–û—Ü–µ–Ω–∫–∏</h4>
    {% if not grades %}
      <p>–ó–¥–µ—Å—å –ø–æ–∫–∞ –ø—É—Å—Ç–æ ‚Äî –Ω–æ–≤–æ—Å—Ç–Ω–∞—è –ª–µ–Ω—Ç–∞ –∏–ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —à–∫–æ–ª–µ.</p>
    {% else %}
      <table class="table">
        <thead><tr><th>–ü—Ä–µ–¥–º–µ—Ç</th><th>–û—Ü–µ–Ω–∫–∞</th><th>–ì–æ–¥</th><th>–ß–µ—Ç–≤–µ—Ä—Ç—å</th></tr></thead>
        <tbody>
        {% for g in grades %}
          <tr>
            <td>{{ subject_map.get(g.subject_id, '') }}</td>
            <td>{{ g.value }}</td>
            <td>{{ g.year }}</td>
            <td>{{ g.quarter }}</td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
      <h5>–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª –ø–æ –ø—Ä–µ–¥–º–µ—Ç–∞–º</h5>
      <ul>
        {% for k,v in avg.items() %}<li>{{ k }}: {{ v }}</li>{% endfor %}
      </ul>
    {% endif %}
  </div>
  <p><a href="{{ url_for('student_report', year=year) }}">üìä –û—Ç—á—ë—Ç –∑–∞ –≥–æ–¥</a></p>

</div>
{% endblock %}
