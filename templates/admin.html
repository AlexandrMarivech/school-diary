{% extends "base.html" %}
{% block content %}
<div class="card shadow-sm">
    <div class="card-body">
        <h5 class="card-title">üë• –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ</h5>

        <div class="mb-3">
            <a class="btn btn-primary me-2" href="{{ url_for('admin_reports') }}">üìä –£—á—ë—Ç —É—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç–∏</a>
            <a class="btn btn-outline-secondary" href="{{ url_for('test_dashboard') }}">üß™ –¢–µ—Å—Ç–æ–≤—ã–π –¥–∞—à–±–æ—Ä–¥</a>
        </div>

        <h6 class="mt-4">‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h6>
        <form method="post" class="row g-3">
            <div class="col-md-3">
                <input type="text" name="username" class="form-control" placeholder="–õ–æ–≥–∏–Ω" required>
            </div>
            <div class="col-md-3">
                <input type="text" name="fullname" class="form-control" placeholder="–§–ò–û">
            </div>
            <div class="col-md-3">
                <input type="password" name="password" class="form-control" placeholder="–ü–∞—Ä–æ–ª—å" required>
            </div>
            <div class="col-md-3">
                <select name="role" class="form-select" required>
                    <option value="student">–£—á–µ–Ω–∏–∫</option>
                    <option value="teacher">–£—á–∏—Ç–µ–ª—å</option>
                    <option value="admin">–ê–¥–º–∏–Ω</option>
                </select>
            </div>
            <div class="col-12">
                <button type="submit" class="btn btn-success">–°–æ–∑–¥–∞—Ç—å</button>
            </div>
        </form>
    </div>
</div>

<div class="card shadow-sm mt-4">
    <div class="card-body">
        <h5 class="card-title">üìã –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h5>
        <div class="table-responsive">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>–õ–æ–≥–∏–Ω</th>
                        <th>–§–ò–û</th>
                        <th>–†–æ–ª—å</th>
                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody>
                    {% for u in users %}
                        <tr>
                            <td>{{ u.id }}</td>
                            <td>{{ u.username }}</td>
                            <td>{{ u.fullname or '-' }}</td>
                            <td>
                                {% if u.role == 'student' %}–£—á–µ–Ω–∏–∫
                                {% elif u.role == 'teacher' %}–£—á–∏—Ç–µ–ª—å
                                {% elif u.role == 'admin' %}–ê–¥–º–∏–Ω
                                {% endif %}
                            </td>
                            <td>
                                {% if u.role != 'admin' %}
                                    <a class="btn btn-sm btn-outline-primary" href="{{ url_for('edit_user', user_id=u.id) }}">‚úÖ</a>
                                    <form method="post" action="{{ url_for('delete_user', user_id=u.id) }}" style="display:inline;">
                                        <button type="submit" class="btn btn-sm btn-outline-danger" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?')">üóë</button>
                                    </form>
                                {% else %}
                                    (–ê–¥–º–∏–Ω ‚Äî –Ω–µ–ª—å–∑—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å/—É–¥–∞–ª—è—Ç—å)
                                {% endif %}
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}